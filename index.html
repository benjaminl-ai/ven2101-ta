<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VEN2101 Influencer Master</title>
    <style>
        :root {
            --primary: #6c5ce7; --secondary: #a29bfe; --accent: #fdcb6e;
            --success: #00b894; --danger: #d63031; --bg: #f8f9fc;
        }
        body { font-family: 'Poppins', 'Segoe UI', sans-serif; background: var(--bg); margin: 0; color: #2d3436; }
        
        /* é é¢åˆ‡æ› */
        .page { display: none; padding: 20px; animation: fadeIn 0.4s; }
        .page.active { display: block; }

        /* é¦–é è¨­è¨ˆ */
        .welcome-screen { text-align: center; padding: 40px 20px; }
        .logo { font-size: 3rem; margin-bottom: 10px; }
        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 30px; }
        .prod-card { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); cursor: pointer; border: 2px solid transparent; transition: 0.3s; }
        .prod-card:active { transform: scale(0.95); border-color: var(--primary); }
        .prod-card i { font-size: 2.5rem; display: block; margin-bottom: 10px; }

        /* ç·´ç¿’å€è¨­è¨ˆ */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .progress-text { font-size: 0.8rem; font-weight: bold; color: var(--primary); }
        
        .card { background: white; border-radius: 25px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); margin-bottom: 20px; }
        .eng { font-size: 1.2rem; font-weight: bold; color: #2d3436; margin-bottom: 8px; line-height: 1.4; }
        .chi { font-size: 0.9rem; color: #b2bec3; margin-bottom: 20px; }

        .btn-group { display: flex; gap: 10px; }
        .btn { flex: 1; border: none; padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer; }
        .btn-listen { background: #f1f2f6; color: var(--primary); }
        .btn-mic { background: var(--primary); color: white; }
        .btn-mic.recording { background: var(--danger); animation: pulse 1s infinite; }

        /* åº•éƒ¨å°èˆª */
        .footer { display: flex; justify-content: space-between; margin-top: 20px; }
        .btn-nav { background: #2d3436; color: white; border: none; padding: 10px 25px; border-radius: 10px; cursor: pointer; }
        .btn-nav:disabled { opacity: 0.3; }

        /* å½ˆçª— */
        #popup { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 30px; text-align: center; box-shadow: 0 0 50px rgba(0,0,0,0.2); z-index: 100; width: 75%; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 99; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<div id="page-welcome" class="page active">
    <div class="welcome-screen">
        <div class="logo">ğŸ¤</div>
        <h1 style="color:var(--primary); margin:0;">Influencer Master</h1>
        <p>Choose a product to start your review practice</p>
        
        <div class="product-grid">
            <div class="prod-card" onclick="startApp('Ionic Hairdryer', 'ğŸŒ¬ï¸')">
                <i>ğŸŒ¬ï¸</i><strong>Ionic Hairdryer</strong>
            </div>
            <div class="prod-card" onclick="startApp('4K Camera', 'ğŸ“¸')">
                <i>ğŸ“¸</i><strong>4K Camera</strong>
            </div>
            <div class="prod-card" onclick="startApp('Smart Watch', 'âŒš')">
                <i>âŒš</i><strong>Smart Watch</strong>
            </div>
            <div class="prod-card" onclick="startApp('Cleaning Robot', 'ğŸ¤–')">
                <i>ğŸ¤–</i><strong>Cleaning Robot</strong>
            </div>
        </div>
    </div>
</div>

<div id="page-practice" class="page">
    <div class="header">
        <button onclick="goHome()" style="border:none; background:none; color:var(--primary); font-weight:bold;">â† Exit</button>
        <div class="progress-text" id="stage-info">STEP 1/6: GREETING</div>
    </div>

    <div id="card-container">
        </div>

    <div class="footer">
        <button class="btn-nav" id="btn-prev" onclick="moveSection(-1)">Previous Part</button>
        <button class="btn-nav" id="btn-next" onclick="moveSection(1)" style="background:var(--primary)">Next Part</button>
    </div>
</div>

<div class="overlay" id="overlay" onclick="closePop()"></div>
<div id="popup">
    <div id="pop-icon" style="font-size:3rem;"></div>
    <h3 id="pop-title" style="margin:10px 0;"></h3>
    <p id="pop-text" style="color:#666; font-size:0.9rem;"></p>
    <button class="btn btn-mic" onclick="closePop()" style="margin-top:15px">Continue</button>
</div>

<script>
    let currentProd = "";
    let prodEmoji = "";
    let currentSectionIdx = 0;

    const rawData = [
        {
            title: "GREETING & INTRO",
            phrases: [
                { eng: "Welcome back to my channel.", chi: "æ­¡è¿å›åˆ°æˆ‘çš„é »é“ã€‚" },
                { eng: "Hey guys, what's going on?", chi: "å˜¿å¤§å®¶ï¼Œæœ€è¿‘å¥½å—ï¼Ÿ" },
                { eng: "Let's dive right into today's video!", chi: "è®“æˆ‘å€‘ç›´æ¥é€²å…¥ä»Šå¤©çš„å½±ç‰‡å§ï¼" },
                { eng: "Today, I'm going to review the new [PROD].", chi: "ä»Šå¤©æˆ‘è¦è©•æ¸¬é€™æ¬¾å…¨æ–°çš„ [PROD]ã€‚" },
                { eng: "I'm pleased to explore and review the new [PROD].", chi: "æˆ‘å¾ˆæ¦®å¹¸èƒ½ç‚ºå¤§å®¶æ¢ç´¢å’Œè©•æ¸¬é€™æ¬¾ [PROD]ã€‚" }
            ]
        },
        {
            title: "PRODUCT FEATURES",
            phrases: [
                { hair: "This hairdryer can keep your hair straight and soft.", cam: "There are two built-in cameras.", watch: "This watch has a timer function.", robot: "This floor cleaning robot is both a vacuum and a mop.", chi: "é€™é …ç”¢å“çš„åŠŸèƒ½éå¸¸å¯¦ç”¨ã€‚" },
                { hair: "It features a high-speed motor.", cam: "It supports 4K high-definition recording.", watch: "You can use the digital pen to take notes.", robot: "It has two cleaning modes: normal and intensive.", chi: "å®ƒå…·æœ‰éå¸¸å°ˆæ¥­çš„è¦æ ¼ã€‚" },
                { eng: "It is very powerful and easy to use.", chi: "å®ƒçš„åŠŸèƒ½å¼·å¤§ä¸”æ˜“æ–¼ä½¿ç”¨ã€‚" }
            ]
        },
        {
            title: "HOW TO USE",
            phrases: [
                { eng: "It's easy to use. Simply press 'up' or 'down' on the remote control.", chi: "ä½¿ç”¨å¾ˆç°¡å–®ï¼Œåªéœ€æŒ‰é™æ§å™¨ä¸Šçš„ã€Œä¸Šã€æˆ–ã€Œä¸‹ã€ã€‚" },
                { eng: "Just press 'set' for three seconds to select the mode.", chi: "åªéœ€æŒ‰ä½ã€Œsetã€éµä¸‰ç§’é˜å³å¯é¸æ“‡æ¨¡å¼ã€‚" },
                { eng: "Turn the red knob to select your desired speed.", chi: "è½‰å‹•ç´…è‰²æ—‹éˆ•ä¾†é¸æ“‡ä½ éœ€è¦çš„é€Ÿåº¦ã€‚" }
            ]
        },
        {
            title: "GIVE A REVIEW",
            phrases: [
                { eng: "I think this product is worth every penny.", chi: "æˆ‘è¦ºå¾—é€™æ¬¾ç”¢å“ç‰©æœ‰æ‰€å€¼ã€‚" },
                { eng: "If you wonder my opinion, I would say it's amazing.", chi: "å¦‚æœä½ æƒ³çŸ¥é“æˆ‘çš„æƒ³æ³•ï¼Œæˆ‘æœƒèªªå®ƒå¾ˆæ£’ã€‚" },
                { eng: "To me, the battery life is the most impressive part.", chi: "å°æˆ‘ä¾†èªªï¼ŒçºŒèˆªåŠ›æ˜¯æœ€ä»¤äººå°è±¡æ·±åˆ»çš„éƒ¨åˆ†ã€‚" }
            ]
        },
        {
            title: "CALL TO ACTION",
            phrases: [
                { eng: "Enter my promo code to get a discount.", chi: "è¼¸å…¥æˆ‘çš„å„ªæƒ ç¢¼å³å¯ç²å¾—æŠ˜æ‰£ã€‚" },
                { eng: "Click the link below and enter my promo code.", chi: "é»æ“Šä¸‹æ–¹é€£çµä¸¦è¼¸å…¥æˆ‘çš„å„ªæƒ ç¢¼ã€‚" }
            ]
        },
        {
            title: "CLOSING",
            phrases: [
                { eng: "Thanks for watching guys. Give it a like and subscribe!", chi: "è¬è¬æ”¶çœ‹ï¼Œè«‹é»è®šä¸¦è¨‚é–±æˆ‘çš„é »é“ï¼" },
                { eng: "Take care, have a great week, and I'll see you very soon.", chi: "ä¿é‡ï¼Œç¥ä½ æœ‰æ„‰å¿«çš„ä¸€é€±ï¼Œæˆ‘å€‘å¾ˆå¿«å†è¦‹ã€‚" }
            ]
        }
    ];

    function startApp(prod, emoji) {
        currentProd = prod;
        prodEmoji = emoji;
        currentSectionIdx = 0;
        document.getElementById('page-welcome').classList.remove('active');
        document.getElementById('page-practice').classList.add('active');
        renderSection();
    }

    function goHome() {
        document.getElementById('page-practice').classList.remove('active');
        document.getElementById('page-welcome').classList.add('active');
    }

    function renderSection() {
        const section = rawData[currentSectionIdx];
        document.getElementById('stage-info').innerText = `STEP ${currentSectionIdx + 1}/6: ${section.title}`;
        const container = document.getElementById('card-container');
        container.innerHTML = "";

        section.phrases.forEach((p, i) => {
            let engText = p.eng || "";
            // è™•ç†å‹•æ…‹ç”¢å“å
            engText = engText.replace("[PROD]", currentProd);
            // è™•ç†ç‰¹å®šç”¢å“ Features
            if (currentSectionIdx === 1) { // Features section
                if (currentProd.includes("Hair")) engText = p.hair || engText;
                if (currentProd.includes("Camera")) engText = p.cam || engText;
                if (currentProd.includes("Watch")) engText = p.watch || engText;
                if (currentProd.includes("Robot")) engText = p.robot || engText;
            }

            const card = document.createElement('div');
            card.className = "card";
            card.innerHTML = `
                <div class="eng">${engText}</div>
                <div class="chi">${p.chi}</div>
                <div class="btn-group">
                    <button class="btn btn-listen" onclick="playAudio('${engText.replace(/'/g, "\\'")}')">ğŸ”Š Listen</button>
                    <button class="btn btn-mic" onclick="handleRecord('${engText.replace(/'/g, "\\'")}', this)">ğŸ¤ Record</button>
                </div>
            `;
            container.appendChild(card);
        });

        document.getElementById('btn-prev').disabled = currentSectionIdx === 0;
        document.getElementById('btn-next').innerText = currentSectionIdx === 5 ? "Finish" : "Next Part";
    }

    function moveSection(step) {
        currentSectionIdx += step;
        if (currentSectionIdx >= 6) {
            showPop("ğŸ† Script Finished!", "ğŸŒŸ", "You have practiced the full influencer script for " + currentProd + "!");
            currentSectionIdx = 0;
            goHome();
        } else {
            renderSection();
            window.scrollTo(0,0);
        }
    }

    function playAudio(t) {
        const m = new SpeechSynthesisUtterance(t);
        m.lang = 'en-US'; m.rate = 0.9;
        window.speechSynthesis.speak(m);
    }

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    recognition.lang = 'en-US';

    function handleRecord(target, btn) {
        btn.innerText = "Listening...";
        btn.classList.add('recording');
        recognition.start();

        recognition.onresult = (e) => {
            const result = e.results[0][0].transcript.toLowerCase();
            const cleanTarget = target.toLowerCase().replace(/[.,!?'" ]/g, "");
            const cleanResult = result.replace(/[.,!?'" ]/g, "");
            
            btn.innerText = "ğŸ¤ Record";
            btn.classList.remove('recording');

            if (cleanResult.includes(cleanTarget) || cleanTarget.includes(cleanResult)) {
                showPop("Excellent! ğŸ‰", "ğŸŒŸ", `You said: "${result}"\nPerfect pronunciation!`);
            } else {
                showPop("Try Again!", "ğŸ’ª", `You said: "${result}"\nTip: Listen to the audio and try again.`);
            }
        };
    }

    function showPop(title, icon, text) {
        document.getElementById('pop-title').innerText = title;
        document.getElementById('pop-icon').innerText = icon;
        document.getElementById('pop-text').innerText = text;
        document.getElementById('overlay').style.display = 'block';
        document.getElementById('popup').style.display = 'block';
    }

    function closePop() {
        document.getElementById('overlay').style.display = 'none';
        document.getElementById('popup').style.display = 'none';
    }
</script>

</body>
</html>
